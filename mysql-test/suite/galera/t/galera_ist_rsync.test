--source include/big_test.inc
--source include/galera_cluster.inc
--source include/have_innodb.inc

# Save original auto_increment_offset values.
--let $node_1=node_1
--let $node_2=node_2
--source include/auto_increment_offset_save.inc
--source suite/galera/include/galera_st_disconnect_slave.inc
--source suite/galera/include/galera_st_shutdown_slave.inc
--source suite/galera/include/galera_st_kill_slave.inc
--source suite/galera/include/galera_st_kill_slave_ddl.inc
--source include/auto_increment_offset_restore.inc

# The test should result in three ISTs. Kill slave DDL case should not
# produce IST since the node is killed in unsafe state. However
# only two of the ISTs produce 'Bypassing SST with method rsync'
# log line since in the Disconnect Slave case the joiner does not
# prepare SST request.
--let $assert_text = Bypassing SST with method rsync
--let $assert_file = $MYSQLTEST_VARDIR/log/mysqld.1.err
--let $assert_select = Bypassing SST with method rsync
--let $assert_count = 2
--let $assert_only_after = CURRENT_TEST
--source include/assert_grep.inc
